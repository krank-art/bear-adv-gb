-- title:   game title
-- author:  game developer, email, etc.
-- desc:    short description
-- site:    website link
-- license: MIT License (change this to your license of choice)
-- version: 0.1
-- script:  lua

-- set special collission rules for tiles where
--  the dir(ection) shows which edge of tile is solid
--  e.g. N (north) means the top edge is solid
DIR = {N=1,E=2,S=4,W=8}
-- direction collision tiles
--  only NORTH implemented so far
dirColTls={[136]=1,[137]=1,[138]=1}
-- sound lookup, jumping, bumping head
snd={jmp=32,bmp=33}
-- solid tiles index min, solid tiles index max, 
--  max jump timer, jump velocity, gravity
cfg={solidMin=1,solidMax=95,maxJmpTmr=28,jmpVel=2,G=2}
-- x, y, velocity x, velocity y width, height, onGround, 
--  onCeiling, jumpReleased
plr={x=96,y=24,vx=0,vy=0,w=16,h=16,onGrd=false,
 onCeil=false,jmpTmr=0,jmpRls=true,jmpSnd=false}
cam={x=0,y=0} -- global camera
-- https://github.com/nesbox/TIC-80/wiki/blit-segment
-- to access page two in tileset, we need to set to 5
poke4(2*0x3ffc,4) -- set to 2 bits per pixel
music(0)

function TIC()
 cls(13)
 map()
 updPlr()
 spr(784,plr.x,plr.y,1,1,0,0,2,2)
 --print("HELLO WORLD!",84,84)
 print(tableToString(plr),2,2,15,false,1,true)
end

function chkPlrGrd()
 for i=0, plr.w-1 do
  if isSld(plr.x+i,plr.y+plr.h+1,DIR.N) 
  then return true end
 end
 return false
end

function chkPlrCeil()
 for i=0, plr.w-1 do
  if isSld(plr.x+i,plr.y-1) then return true end
 end
 return false
end

function jmpPlr()
 local jmpDwn = btn(4)

 -- update release flag
 if not jmpDwn then
  plr.jmpRls = true  -- button released, next jump allowed
 end
 
 -- start jump if on ground and button was released
 if jmpDwn and plr.onGrd and plr.jmpRls then
  plr.jmpTmr = 1
  plr.vy = -cfg.jmpVel
  plr.jmpRls = false  -- prevents immediate auto-repeat
  plr.jmpSnd=true
  sfx(32,40,-1)
 end
 
 if plr.onCeil and plr.jmpTmr > 0 then
  plr.jmpSnd=false
  sfx(snd.bmp,26,24)
 end
 
 -- continue jump while button held and under max jump time
 if jmpDwn and plr.jmpTmr > 0 and not plr.onCeil then
  plr.vy = -cfg.jmpVel
  plr.jmpTmr = plr.jmpTmr + 1
 end
 
 -- reset jump timer if button released or hit ceiling
 if not jmpDwn or plr.onCeil or plr.jmpTmr > cfg.maxJmpTmr then
  plr.jmpTmr = 0
  if plr.jmpSnd then sfx(-1) end
 end

 -- apply gravity if not on ground and jump timer finished
 if not plr.onGrd and plr.jmpTmr == 0 then
  plr.vy = cfg.G
 end

 -- vertical delta for movePlayer
 return plr.vy
end

function updPlr()
 local dvx,dvy=0,0 -- delta velocity
 if btn(2) then dvx=dvx-1 end
 if btn(3) then dvx=dvx+1 end
 dvy=jmpPlr()
 --if btn(0) then dvy=dvy-1 end
 --if btn(1) then dvy=dvy+1 end
 plr.vx=dvx
 plr.vy=dvy
 plr.onGrd=chkPlrGrd()
 plr.onCeil=chkPlrCeil()
 movePlayer()
end

-- isSolid; return if tile at position is solid
function isSld(x, y, dir)
 local tile = mget(flr(x/8), flr(y/8))
 if dir then
  local flgs=dirColTls[tile]
  if flgs then 
   -- collission margin is one pixel
   if (flgs & dir & DIR.N)~=0 and (y%8==0 or y%8==1) then return true end
   if (flgs & dir & DIR.S)~=0 and (y%8==0 or y%8==7) then return true end
   if (flgs & dir & DIR.E)~=0 and (x%8==0 or x%8==1) then return true end
   if (flgs & dir & DIR.W)~=0 and (x%8==0 or x%8==7) then return true end
  end
 end
 return tile >= cfg.solidMin and tile <= cfg.solidMax
end

-- isSolidSweep; return first solid tile index
-- along a line (x1,y1)->(x2,y2) otherwise false
function isSldSwp(x1, y1, x2, y2)
 local dx = x2 - x1
 local dy = y2 - y1
 -- step one pixel at a time
 local steps = max(abs(dx), abs(dy)) 
 if steps == 0 then steps = 1 end
 local tx, ty
 for i = 0, steps do
  local t = i / steps
  local px = x1 + dx * t
  local py = y1 + dy * t
  tx = flr(px / 8)
  ty = flr(py / 8)
  local tile = mget(tx, ty)
  if tile >= cfg.solidMin and tile <= cfg.solidMax then
   return tile, tx, ty -- first solid tile found
  end
 end
 return false -- no solid tiles
end

function printTileAt(x,y,px,py)
 local tx = flr(x/8)
 local ty = flr(y/8)
 local tile = mget(tx,ty)
 print(frmt("tile:%d,x:%d,y:%d",
  tile,tx,ty),px or 0,py or 0)
end

-- sweep player rectangle from old position to new, clamped to tiles
function movePlayer()
 local px, py = plr.x, plr.y
 local vx, vy = plr.vx, plr.vy
 local w, h = plr.w, plr.h

 -- first, horizontal movement
 if vx ~= 0 then
  local sign = vx > 0 and 1 or -1
  -- try moving pixel by pixel
  for i = 1, abs(vx) do
   if sign > 0 then
    -- moving right: check right edge
    if isSld(px + w, py) or isSld(px + w, py + h - 1) then
     vx = i - 1
     break
    end
   else
    -- moving left: check left edge
    if isSld(px - 1, py) or isSld(px - 1, py + h - 1) then
     vx = -(i - 1)
     break
    end
   end
   px = px + sign
  end
 end

 -- then, vertical movement
 if vy ~= 0 then
  local sign = vy > 0 and 1 or -1
  for i = 1, abs(vy) do
   if sign > 0 then
    -- moving down: check bottom edge
    if isSld(px,py+h,DIR.N) or isSld(px+w-1,py+h,DIR.N) then
     vy = i - 1
     break
    end
   else
    -- moving up: check top edge
    if isSld(px, py - 1) or isSld(px + w - 1, py - 1) then
     vy = -(i - 1)
     break
    end
   end
   py = py + sign
  end
 end

 -- apply movement
 plr.x = plr.x + vx
 plr.y = plr.y + vy
end

flr=math.floor
min=math.min
max=math.max
abs=math.abs
frmt=string.format
function clmp(v, low, hi) return math.max(low, math.min(hi, v)) end
function tern(cond, t, f) -- ternary operation
 if cond then return t else return f end
end
function tableToString(t)
 local parts = {}
 for k, v in pairs(t) do
  table.insert(parts, tostring(k) .. "=" .. tostring(v))
 end
 local str= "{" .. table.concat(parts, ", ") .. "}"
 return str:gsub("(".. string.rep(".", 60) ..")", "%1\n")
end

-- <TILES>
-- 000:00005100000050df000014ff00001dff00000fff00004fff00004f7500004555
-- 001:00000000fffffffffffffffffff5dff5ff555555755555555555555555555555
-- 002:00450000f7050000ff1400005f74000055f0000055d100005551000055510000
-- 004:655555599fbffbf2db6fa6f3da6aa6a29a6aa9a29a6559a29adfb6a29adba6a2
-- 005:6555555997affbf2d75fa6f3da5aa6a1590a5100514000829adba0a29a9a6251
-- 006:655555599fbfbff2dfeffef3dffffff3dfaeaaf3dbfbffe3de5b7db3de5b7db3
-- 007:655555599ffffff2daaaaaa3928ff282900eb002900800029208008299080862
-- 016:0000455500004555000045550000455500004555000045550000455500004555
-- 017:5555555155555551555555515555555155555551555555515555555155555551
-- 018:100000004ff70000cfff0000cff500004f550000475500004555000045550000
-- 020:559aa651df9aa6f3db9aa6f29a6559a29aaa9aa29aaa9aa25555555120000008
-- 021:559a1210db9200f29a9055a29a2459a2969a9692949686525455451120000008
-- 022:deabbeb3de5b7db3defbffb3dbaeaae3daffffa39ffffff29aaaaaa220000008
-- 023:9d062c729d073c729df7ff72965955929faaaaf25aaaaaa14555555120000008
-- 032:0000455500004555000045550000055500001555000014550000505500005100
-- 033:5555555155555551555555515555555055555554555555145555550500000045
-- 036:65555559dffffff3dffffff39ffffff19effff719affff519aeff7519aae7551
-- 038:200000088ffffff2cffffff3cffffff3cffffff3cffffff3cffffff3cffffff3
-- 039:aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
-- 052:9aa655519aa655519aa005519a2004519a000051920000419000000120000008
-- 054:cffffff3cffffff3cffffff3cffffff3cffffff3cffffff38ffffff220000008
-- 055:aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
-- 112:ffffaaaaffffaaaaffffaaaaffffaaaaffffaaaaffffaaaaffffaaaaffffaaaa
-- 113:5555000055550000555500005555000055550000555500005555000055550000
-- 128:fffbeffffffaafffffbaaeffffaaaafffbaaaaeffaaaaaafbaaaaaaeaaaaaaaa
-- 129:ffbaaefffbaaaaeffaaaaaafbaaaaaaebaaaaaaeaaaaaaaaaaaaaaaaaaaaaaaa
-- 132:200000004fffffffdaaaaaaa9aaaaaaa9659aaaa96b9aaaa96a9aaaa9659aaaa
-- 133:00080000fff10000aaa70000aaa60000659600006b9600006a96000065960000
-- 144:aaaaaaaabaaaaaaefaaaaaaffbaaaaefffaaaaffffbaaefffffaaffffffbefff
-- 145:aaaaaaaaaaaaaaaaaaaaaaaabaaaaaaebaaaaaaefaaaaaaffbaaaaefffbaaeff
-- 148:9aaa00009aaa00009aaa00009aaa00009aaa00009aaa00009aaa00009aaa0000
-- 149:aaa60000aaa60000aaa60000aaa60000aaa60000aaa60000aaa60000aaa60000
-- 164:9aaaaaaa9659aaaa96b9aaaa96a9aaaa9659aaaa9aaaaaaa5aaaaaaa65555555
-- 165:aaa60000659600006e9600006a96000065960000aaa60000aaa5000055590000
-- 192:aaa20000aa20ffffaa0faaaaa2caaaaaa0baeffba8aeffff28afffff2aefffff
-- 193:8aaaaaa208aaaa20f0aaaa00a38aa200ae0aa000ba2aa000fa282000fba82000
-- 194:00008aaa000008aa000000aa0000008a0000000a0000000a0000000800000008
-- 195:aaa65555aa65ffffaa5f5555a6d55555a5759696a55967996556579565955795
-- 196:9aaaaaa659aaaa65f5aaaa5f579aa6da5d5aa5ba655aa9ae955969af57596aef
-- 197:55559aaaffff59aaaaaaf5aaaaaaa79aebebae5afbefba6afbeffa69fbeffba9
-- 208:2aefffff0affffff8affffff8affffff8affffff8affffff8aaaaaaa2aaaaaaa
-- 209:fba82000ffa00000ffa20000ffa20000ffa20000ffa20000aaa20000aaa82000
-- 210:0000000800000000000000000000000000000000000000000000000000000008
-- 211:659557955565579555655795556557955565579555eff79f5555555565555555
-- 212:57596aef5d555aff5d559aff5d559aff5d559affff559aff55559aaa55596aaa
-- 213:fbeffba9fbefffa5fbefffa6fbefffa6fbefffa6fbefffa6aaaaaaa6aaaaaaa9
-- 224:2aefffff2affffff2affffff2a75dfff2ad75fffa8d75effa8596effa8596eff
-- 225:fba82000ffa82000ffa82000ffa82000fba82000fb2aa000fb2aa000fb2aa000
-- 226:00000008000000080000000800000008000000080000000a0000000a0000000a
-- 227:659aa69a65655795656557956565579565955795a5955795a59ff79fa5555555
-- 228:a6596aef5d596aff5d596aff5d596aff57596aef575aa9eff75aa9ef555aa9aa
-- 229:fbeffba9fbefffa9fbefffa9fbefffa9fbeffba9fbeffb6afbeffb6aaaaaaa6a
-- 240:a8659effe8aaafffe3affffff3affffff3aaaaaaff8aaaaaff8aaaaaff8aaaaa
-- 241:fa2aa000facbe000facbe300facff300aacff300a2ffff00a2ffff00a2ffff00
-- 242:0000000a000000cb000000cb000000cf000000cf000000ff000000ff000000ff
-- 243:a5555555a55aa79aa6565795a65ff7dfa6555555aa555555aa555555aa555555
-- 244:555aa9aae59aa9afd59aa6aff59aa6af559aa6aa55aaaa9a55aaaa9a55aaaa9a
-- 245:aaaaaa6afbeffa9afbeffa9afbeffa9aaaaaaa9aaaaaa6aaaaaaa6aaaaaaa6aa
-- </TILES>

-- <SPRITES>
-- 000:000000000000cff30000cff30000c3000000c3000000c3000000c30000000000
-- 001:00000000cff3cff3cff3cff3000000c3000000c3000000c3000000c300000000
-- 002:0f300c000f300f30fcc3cff0fff3fff3fcc3fff30c00ccc00f300f3000000000
-- 016:000000000000c3000000c3000000c3000000c3000000c3000000c30000000000
-- 017:00000000000000c3000000c3000000c3000000c3000000c3000000c300000000
-- 018:00000c00c3f00f30fff3cff0fff3fff3cff0cff00f300f300c000c0000000000
-- 032:000000000000c3000000c3000000c3000000c3000000cff30000cff300000000
-- 033:00000000000000c3000000c3000000c3000000c3cff3cff3cff3cff300000000
-- 128:510550455cf41f351be41be41be00be41ffffff30ffcfcf3cffcfcf3cffcfcf3
-- 136:510550455cf41f351be41be41be00be4cffffff4cf3f3ff0cf3f3ff3cf3f3ff3
-- 144:cfaf0be30ffc33f3cff3ccf3cfcffff310fffff41ffffff45cf30c3551041045
-- 152:cbe0faf3cfcc3ff0cf33cff3cffff3f31fffff041ffffff45c30cf3551041045
-- </SPRITES>

-- <MAP>
-- 000:070707070707070707070707070707070707070707070707070707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 001:070707070707070707070707070707070707070707070707070707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 002:070707070707070707070707070707070707070707070707070707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 003:070707070707070707070707070707070707070707070707070707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 004:070707070707070707070707070707070707070707070707070707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 005:070707070707070707070707070707070707070707070707070707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 006:0707889898a8070707070707c0d0c0d0e0f0a0b0a0b0a0b0070707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 007:0707891717a9070707070707c1d1c1d1e1f1a1b1a1b1a1b1070707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 008:0707891717a9070707078090070817171717809007070707070707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:0707891717a9070707078191081717171717819107281738070707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 010:07078917889898a80707070817170c1c2c178090286c7c8c380707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 011:07078917891717a90707081717170d1d2d178191176d7d8d170707070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:07078917891717a90708171717170e1e2e178090176e7e8e171738070707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 013:07078917891717a90817171717170f1f2f178191176f7f8f171717380707000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 014:102030404141104010203030404182928292829282928292829282928292000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 015:112121314141113111212121314183938393839383938393839383938393000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 016:1222223211401110203040213100000000008292a5b50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 017:0000000000000000000000000000000000000000a6b60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </MAP>

-- <MAP1>
-- 000:102020202020202020202020202020202020202020202020202020202030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 001:115000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 002:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 003:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 004:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 005:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 006:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 007:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 008:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 010:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 011:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 013:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 014:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 015:110000000000000000000000000000000000000000000000000000000031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 016:122222222222222222222222222222222222222222222222222222222232000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </MAP1>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000206000000000
-- 001:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000104000000000
-- 002:02000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020000b000000000
-- 003:03000300030033004300630073008300b300d300f300f300f300f300f300f300f300f300f300f300f300f300f300f300f300f300f300f300f300f300300000000000
-- 032:000000000010001000200030004000400050005000600060007000800080009000a000b000b000c000d000d000e000e000e000f000f000f000f000f0270000000000
-- 033:00000000000000000000000010001000100010001000200020002000300040004000500050006000600080009000a000b000c000d000e000f000f000134000000000
-- </SFX>

-- <PATTERNS>
-- 000:855108000000700008100000800008100000900008000000100000000000800008000000100000000000800008100000600008100000500008100000600008000000100000000000000000000000000000000000000000000000000000000000600008000000500008100000600008100000800008000000100000000000600008000000100000000000600008100000400008100000f00006100000400008000000000000000000100000000000000000000000000000000000000000000000
-- 001:88f122000000100000000000800022100000f00020000000100000000000f00020100000000000000000800022000000100000000000800022100000000000000000800022000000f00020000000100000000000f00020000000100000000000600022000000100000000000600022100000d00020000000100000000000d00020000000100000000000600022000000100000000000600022100000600022000000100000000000d00020000000100000000000d00020000000100000000000
-- 002:90003400000000000000000090003e90003e90003e00000090003e00000000000000000090003e00000090003e00000090003e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 003:4a213600000000000000000040003600000040003c00000000000000000040003c00000040003c00000040003600000000000000000040003600000040003600000040003c00000000000000000040003c00000040003c00000000000000000040003600000000000000000040003600000040003c00000000000000000040003c00000040003c00000040003600000000000000000040003600000000000000000040003c000000400036600036800036900036b00036d00036f00036400038
-- </PATTERNS>

-- <TRACKS>
-- 000:0800000800010800010000000000000000000000000000000000000000000000000000000000000000000000000000006f0000
-- </TRACKS>

-- <PALETTE>
-- 000:182c4825717938b764a7f070ffcd75a7f07038b76425717929366f3b5dc941a6f673eff7f4f4f494b0c2566c86333c57
-- 001:1a1c2c5d275db13e53ef7d57ffcd75a7f07038b76425717929366f3b5dc941a6f673eff7f4f4f494b0c2566c86333c57
-- </PALETTE>

